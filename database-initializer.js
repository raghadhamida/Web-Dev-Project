
import gallery from "./collections/gallery.json" assert {type: 'json'};;

//Registered users array
const users = [
	{'username': 'default', 'password':'default', 'usertype': 0, 'followedArtists': ["default"], 'reviews': [], 'likes': [], 'artworks': ["default"], 'workshops': ["default"]}
];

//Import mongoose module
import pkg from 'mongoose';

const { connect, connection } = pkg;

//importing collections
import User from './collections/users.js';
import Art from './collections/artworks.js';

//loading the data
const loadData = async () => {
	
	//Connect to the mongo database.
  	await connect('mongodb://localhost:27017/project');

	//Remove database and start a new one
	await connection.dropDatabase();

	//Map each artwork object into a new Art model
	let artworks = gallery.map( artwork => new Art(artwork));
	artworks.push({"name": "Sunflowers", "artist": "Vincent Van Gogh", "year": "1889", "category": "painting", "medium": "oil on canvas", "description": "", "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Vincent_Willem_van_Gogh_127.jpg/270px-Vincent_Willem_van_Gogh_127.jpg"},
	{"name": "Wheatfield with Crows", "artist": "Vincent Van Gogh", "year": "1890", "category": "painting", "medium": "oil on canvas", "image" : "https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Vincent_van_Gogh_-_Wheatfield_with_crows_-_Google_Art_Project.jpg/1920px-Vincent_van_Gogh_-_Wheatfield_with_crows_-_Google_Art_Project.jpg", "description" : ""},
	{"name" : "Almond Blossoms", "artist": "Vincent Van Gogh", "year" : "1890", "medium" :"oil on canvas", "category":"painting", "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/68/Vincent_van_Gogh_-_Almond_blossom_-_Google_Art_Project.jpg/270px-Vincent_van_Gogh_-_Almond_blossom_-_Google_Art_Project.jpg", "description":""}, 
	{"name":"Starry Night", "artist":"Vincent Van Gogh", "year": "1888", "medium" :"oil on canvas", "category":"painting", "image" :"https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/Starry_Night_Over_the_Rhone.jpg/270px-Starry_Night_Over_the_Rhone.jpg", "description" : ""},
	{"name": "ottawa overview satellite realistic buildings night", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_ottawa_overview_satellite_realistic_buildi_7ede541a-5bf8-4693-9875-e9a128526afa.png"},
    {"name": "canada ottawa river gatineau bridges border portage provinces ontario quebec", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_canada_ottawa_river_gatineau_bridges_borde_5e9c97b0-2a63-4d28-a5f9-efbd40255c63.png"},
    {"name": "canada ottawa river gatineau bridges border portage provinces ontario quebec", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_canada_ottawa_river_gatineau_bridges_borde_dccc113a-84e5-4894-9583-d9250e422f67.png"},
    {"name": "carleton university river campus evening ottawa canada winter", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_carleton_university_river_campus_evening_o_7c98e4ad-8640-4ace-80bf-b6385949f2e6.png"},
    {"name": "carleton university river campus evening ottawa canada winter", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_carleton_university_river_campus_evening_o_86c8a822-c7d7-4551-9c32-6c115dd784e7.png"},
    {"name": "carleton university river campus evening ottawa canada winter", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_carleton_university_river_campus_evening_o_a3fd1f7d-4c30-4a1a-90f4-bca034d57987.png"},
    {"name": "carleton university river campus evening ottawa canada winter", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_carleton_university_river_campus_evening_o_fbef4788-91b5-429e-94e4-a59f42ea20c0.png"},
    {"name": "ottawa overview satellite realistic buildings night", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_ottawa_overview_satellite_realistic_buildi_4d9c0b3b-0ef1-4498-acd0-65b095465778.png"},
    {"name": "ottawa overview satellite realistic buildings night", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_ottawa_overview_satellite_realistic_buildi_5daa053a-431b-4803-9330-98aded464119.png"},
    {"name": "ottawa overview satellite realistic buildings night", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_ottawa_overview_satellite_realistic_buildi_7ede541a-5bf8-4693-9875-e9a128526afa.png"},
    {"name": "rideau canal winter evening ice ottawa canada skating painting bridge", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_rideau_canal_winter_evening_ice_ottawa_can_13447e1e-f54e-4314-8b30-5e24c776bdad.png"},
    {"name": "rideau canal winter evening ice ottawa canada skating painting bridge", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_rideau_canal_winter_evening_ice_ottawa_can_617b8781-d37b-45c6-ab34-61766ab0c942.png"},
    {"name": "rideau canal winter evening ice ottawa canada skating painting bridge", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_rideau_canal_winter_evening_ice_ottawa_can_f2e9adb4-ecd5-4c18-b385-792e8bf58849.png"},
    {"name": "rideau canal winter evening ice ottawa canada skating painting bridge", "artist": "Midjourney", "year": "2022", "category": "generated", "medium": "midjourney", "description": "Image generated by midjourney.com. (C) Midjourney, Inc., all rights reserved.", "image": "https://seang.win/comp2406images/midjourney/CurrentlyQuestioning_rideau_canal_winter_evening_ice_ottawa_can_fa9638fb-3da9-4393-9cea-263408a82db5.png"});
	
	for(let art of artworks){
		art["reviews"] = new Map();
		art.category = art.category.toLowerCase();
	}
	
	//make an array of already existing artists to add them to the users model.
	let existingArtists = [];
	for(let i=0; i<artworks.length; i++){
		existingArtists[i] = {'artist': artworks[i]["artist"], 'artName': artworks[i]["name"]};
	}
	
	//adding each artist with their artwork to the users array
	for(let artistArt of existingArtists){
		//console.log(artistArt['artist']);
		users.push({'username': artistArt.artist, 'password': artistArt.artist, 'usertype': 1, 'followedArtists': [],'reviews': [],'likes': [], 'artworks': [artistArt['artName']], 'workshops': []});
	}

	//Map each registered user object into a new User model
	let regUsers = users.map( user => new User(user));

	//Creates art and user and saves it to artworks and users collections
	await Art.create(artworks);
	await User.create(regUsers);
}

//Call to load the data
loadData()
  .then((result) => {
	console.log("Closing database connection.");
 	connection.close();
  })
  .catch(err => console.log(err));

